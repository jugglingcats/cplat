<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <script src="js/angular.js"></script>
    <script src="core/dynamic-menu.js"></script>
    <script src="core/dynamic-module.js"></script>
    <script src="js/ocLazyLoad.js"></script>
    <script src="js/angular-ui-router.js"></script>
    <script>
        // TODO: should be in script file ;-)
        var app = angular.module("cplat", ['oc.lazyLoad', 'dynamic.module']);

        app.config(['$ocLazyLoadProvider', '$dynamicModuleProvider', '$stateProvider', function ($ocLazyLoadProvider, $dynamicModuleProvider, $stateProvider) {
            $ocLazyLoadProvider.config({
                debug: true,
                events: true
            });

            console.log("Initialising container application");

            $stateProvider.state("app", {
                url: "",
                templateUrl: "core/index.html",
                controller: "TestCtrl",
                resolve: {
                    test: function ($ocLazyLoad) {
                        console.log("Resolve for test");
                        return $ocLazyLoad.load({
                            name: "test",
                            files: ["core/module.js"]
                        })
                    }
                }
            });
            $stateProvider.state("404", {
                url: "/404",
                templateUrl: "core/404.html"
            });

            $dynamicModuleProvider.configure(["item", "app1", "app2"], "/404");
        }]);
    </script>
</head>
<body ng-app="cplat" style="padding-top: 50px">

<nav class="navbar navbar-inverse navbar-fixed-top navbar-default">
    <div class="container">
        <div class="navbar-header">
            <a href="#" class="navbar-brand">LFGSS Classifieds</a>
        </div>
        <div class="navbar-collapse">
            <dynamic-menu></dynamic-menu>
            <form class="navbar-form navbar-right">
                <div class="form-group">
                    <input type="text" placeholder="Email" class="form-control">
                </div>
                <div class="form-group">
                    <input type="password" placeholder="Password" class="form-control">
                </div>
                <button type="submit" class="btn btn-success">Sign in</button>
            </form>
        </div>
    </div>
</nav>

<div ui-view></div>
</body>
</html>